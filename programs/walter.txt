 Program
   Variables Setup
   Robot Program
     Popup: Hello World!
     Home
     MoveL
       Direction: Base Z+
         Until (distance)
     MoveJ
       Waypoint_1
     Home
     MoveJ
       Waypoint_3
     MoveL
       Direction: Base Z-
         Until (distance)
       Loop 3 times
         Direction: Base
           Until (distance)
         Direction: Base
           Until (distance)
     MoveJ
       Waypoint_5
     freedrive_mode()
     fdStatus≔get_freedrive_status()
     tcpPose≔get_actual_tcp_pose()
     tcpZ≔tcpPose[2]
     Loop fdStatus == 0 and tcpZ < 0.8
       fdStatus≔get_freedrive_status()
       tcpPose≔get_actual_tcp_pose()
       tcpZ≔tcpPose[2]
     end_freedrive_mode()
     Popup: Freedrive deactivated.
     MoveJ
       Waypoint_4
     Popup: Move tool with fixed TCP.
     centerPose≔get_actual_tcp_pose()
     Loop 3 times
       freedrive_mode()
       tcpPose≔get_actual_tcp_pose()
       tcpZ≔tcpPose[2]
       Loop sqrt(pow(tcpPose[2]-centerPose[2],2)+pow(tcpPose[1]-centerPose[1],2)+pow(tcpPose[0]-centerPose[0],2)) < 0.25
         tcpPose≔get_actual_tcp_pose()
         tcpZ≔tcpPose[2]
       end_freedrive_mode()
       Wait: 1.0
       MoveL
         centerPose
       Wait: 1.0
     Home
