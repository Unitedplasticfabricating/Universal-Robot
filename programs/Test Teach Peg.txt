 Program
   Variables Setup
   Robot Program
     Set
     'MoveL'
     ask how many
       num_pegs≔'Weld how many pegs now?'
       If num_pegs<1
         Loop
           Popup: invalid: negative number given. restart program
     MoveJ
       Waypoint_40
       'above waypoint is home'
       'Waypoint_2'
       Waypoint_3
     Set
     freedrive_m_var≔ False 
     freedrive_m_var≔ True 
     Popup: Move the TCP to the left side of the weld (very center of groove), then click 'Continue'
     tcp_pose_left≔get_actual_tcp_pose()
     Popup: Move the TCP to the right side of the weld (very center of groove), then click 'Continue'
     tcp_pose_right≔get_actual_tcp_pose()
     freedrive_m_var≔ False 
     Wait: 0.25
     sync()
   Thread_1
     Loop  True 
       If freedrive_m_var≟ True 
         freedrive_mode()
         free_dr_already≔ True 
       Else
         If free_dr_already
           end_freedrive_mode()
       sync()
